# 项目简介（Overview）

## 一句话定位

`Lainclaw` 是一个面向个人的轻量级 AI 助手 CLI，继承 openclaw 的最小工作流思想，目标是把对话式智能能力快速接入到本地命令行与飞书入口。

## 核心目标

- 保留一套统一入口：`agent`、`gateway`、`heartbeat`、`tools`、`auth`。
- 支持会话记忆与长期记忆文件化沉淀，兼顾快速对话和上下文连贯。
- 在单一主进程内承载多个通道（本地/飞书）与模型调用。
- 通过可见持久化与日志帮助个人用户可控排障。

## 当前版本默认能力

- `agent`：命令行直接发起问题，按 session 管理上下文。
- `gateway`：通道边界，启动飞书 WS 或 local 服务；不承载运行时建模与恢复逻辑。
  - CLI 内部已重构为集中式命令分发与统一执行封装，当前版本保持命令格式、行为和返回码兼容，仅结构优化。
- `runtime`（顶层模块）：引入 `pi-agent-core` 统一编排，支持会话级执行 plan 的持久化恢复（`src/runtime`），并通过更直接的导出链路连接网关与 agent 命令。
  - 详见 `docs/wip/20260225-runtime-simplification/runtime-layering.md` 的分层边界与迁移约定。
- 会话持久化：会话索引与消息按 `~/.lainclaw` 目录记录。
- 配置管理：网关参数和工具参数集中到配置文件。
- 工具调用：内置文件读写/时间/目录等工具。
- 长期记忆：支持可选 compact（压缩）与 memory 文件。
- 运行态恢复：按 `channel+sessionKey` 维度持久化中间状态 (`runId/planId/stepId/phase`)。
- 心跳：定时触发规则的轻量运行任务。

## 典型使用场景

1. 日常提问与任务分解（`agent`）。
2. 在飞书里直接发起对话并获取助手回复（`gateway start`）。
3. 保留个人习惯（tool 白名单、历史长度、with-tools、记忆开关）。
4. 用 heartbeat 定期执行自己定义的检查脚本或提醒规则（按 `HEARTBEAT.md`）。
5. 需要会话恢复能力的多轮任务（本地与飞书 channel 共用 `runtime` 运行态索引）。

## 非目标（当前阶段）

- 不把当前版本定位为团队协同平台。
- 不承诺多租户隔离、复杂权限管理或企业级审计。
- 不承诺与多个 LLM Provider 的完整编排能力。
- 不承诺多实例分布式运行时一致性；运行态恢复默认采用单机单进程本地文件持久化。

## 与 openclaw 关系

本项目可理解为 openclaw 思想的“个人化瘦身版”：

- 把通道与会话入口做成可本机运行的 CLI 工具。
- 在保证核心流程稳定的前提下，优先满足“我自己用得顺手”而不是通用平台化。
